# AutoPlan 项目功能说明

## 1. 核心功能概述

AutoPlan 是一个基于 Next.js 和 Shadcn UI 构建的任务管理应用，集成了 AI 功能，帮助用户更高效地管理和分解任务。应用采用现代化的 UI 设计，提供直观的用户体验，并使用浏览器本地存储保存所有数据。

## 2. 主要功能模块

### 2.1 仪表盘

- **功能概述**：提供任务概览和统计信息
- **主要组件**：
  - 任务统计卡片：显示各状态任务的数量和比例
  - 待办任务列表：展示所有未完成的任务
  - 用户等级展示：显示当前用户等级和升级进度
- **用户价值**：让用户快速了解当前任务状态和进度

### 2.2 任务管理

- **任务列表**：
  - 查看所有任务
  - 任务筛选功能
  - 创建新任务按钮
  
- **任务详情**：
  - 查看任务详细信息
  - 管理任务状态
  - 查看和管理子任务列表
  
- **任务操作**：
  - 创建任务
  - 编辑任务
  - 删除任务
  - 更新任务状态

### 2.3 AI 任务分解

- **功能概述**：利用 AI 将复杂任务分解为可管理的子任务
- **核心流程**：
  1. 用户输入任务描述
  2. 设置任务截止日期和时间
  3. AI 根据任务描述和时间限制自动分解任务
  4. 生成包含执行步骤和预估时间的子任务列表
  5. 用户可以保存分解结果到任务系统
  
- **AI 配置**：
  - 自定义 AI 服务的 Base URL
  - 配置 API Key
  - 设置模型名称（如 gpt-4o、gpt-3.5-turbo 等）
  - 调整 AI 返回格式错误时的重试次数
  
- **容错机制**：
  - 当 AI 服务不可用时，提供默认的任务分解模板
  - 验证用户输入，确保必要信息完整

### 2.4 日历视图

- **功能概述**：提供任务的日历视图，帮助用户进行时间规划
- **用户价值**：直观地了解任务在时间维度上的分布

### 2.5 数据分析

- **功能概述**：提供任务完成情况的数据分析和可视化
- **用户价值**：帮助用户了解自己的工作效率和任务完成模式

### 2.6 成就系统

- **功能概述**：激励用户提高任务完成率和使用应用的频率
- **主要特点**：
  - **多种成就类型**：
    - 任务完成：完成不同数量的任务解锁相应成就
    - 连续完成：连续多天完成任务获得奖励
    - 效率提升：在截止日期前完成任务
    - AI使用：使用AI功能解锁相关成就
    - 任务管理：创建和管理子任务解锁成就
  
  - **成就等级**：
    - 铜级：入门级成就，容易获得
    - 银级：中级成就，需要一定努力
    - 金级：高级成就，需要长期坚持
  
  - **用户等级系统**：
    - 基于解锁成就获得的点数计算用户等级
    - 铜级成就1点，银级成就2点，金级成就3点
    - 等级提升为用户提供成就感和动力
  
  - **成就通知**：
    - 成就解锁时实时展示通知
    - 在成就页面可查看所有成就及解锁状态
  
- **用户价值**：
  - 增加应用的趣味性和用户粘性
  - 激励用户更频繁地使用应用功能
  - 引导用户逐步掌握各项功能

### 2.7 设置中心

- **AI 配置管理**：
  - 配置 AI 服务连接参数
  - 保存和重置 AI 配置
  
- **数据管理**：
  - 查看本地存储状态
  - 清除所有数据选项

## 3. 技术实现

### 3.1 前端框架与组件

- **核心框架**：Next.js 15.2.4
- **UI 组件库**：Shadcn UI（基于 Radix UI）
- **状态管理**：Zustand
- **表单处理**：React Hook Form + Zod 验证
- **日期处理**：date-fns
- **数据可视化**：Recharts

### 3.2 数据存储

- **存储方式**：浏览器本地存储（LocalStorage）
- **数据持久化**：通过 Zustand persist 中间件实现
- **数据结构**：
  - Task：任务主体，包含基本信息和子任务列表
  - Subtask：子任务，包含执行步骤和预估时间
  - Achievement：成就，包含进度和解锁状态

### 3.3 AI 集成

- **API 调用**：通过 Next.js API 路由封装 AI 服务调用
- **模型使用**：支持配置不同的 AI 模型
- **错误处理**：实现重试机制和友好的错误提示

### 3.4 成就系统实现

- **成就定义**：在 achievements.ts 中定义所有成就类型和等级
- **成就检测**：使用辅助函数在特定操作后检查成就解锁条件
- **成就跟踪**：将成就状态保存在本地存储，与任务数据一起管理
- **等级计算**：基于解锁成就获得的点数计算用户等级和升级进度

## 4. 用户流程

### 4.1 任务创建流程

1. 用户点击"新建任务"按钮
2. 填写任务标题、描述和截止日期
3. 保存任务到系统

### 4.2 AI 任务分解流程

1. 用户访问 AI 任务分解页面
2. 输入详细的任务描述
3. 设置任务截止日期和时间
4. 点击"使用 AI 分解任务"按钮
5. AI 生成子任务列表
6. 用户可以查看和调整分解结果
7. 点击"保存所有子任务"将结果保存到系统

### 4.3 任务管理流程

1. 用户可以在仪表盘或任务页面查看任务
2. 点击任务查看详情
3. 更新任务状态或管理子任务
4. 任务完成后可以标记为已完成

### 4.4 成就解锁流程

1. 用户执行各种操作（完成任务、使用AI等）
2. 系统自动检查成就解锁条件
3. 达成条件时自动解锁成就并显示通知
4. 用户可在成就页面查看所有成就及解锁状态
5. 解锁成就增加用户等级点数，提升用户等级

## 5. 未来功能规划

根据现有代码结构，系统可能计划扩展以下功能：

- **数据同步**：将本地数据同步到云端
- **团队协作**：支持多用户协作和任务分配
- **更高级的 AI 功能**：如任务优先级建议、时间估算优化等
- **更丰富的数据分析**：提供更详细的效率分析和改进建议
- **成就排行榜**：添加用户排名和社交分享功能
- **自定义成就**：允许用户创建个人目标和成就

## 6. 技术亮点

- **现代化 UI**：使用 Shadcn UI 构建美观且功能丰富的界面
- **响应式设计**：适配不同设备尺寸
- **AI 赋能**：利用 AI 技术提升任务管理效率
- **本地优先**：所有数据存储在本地，保护用户隐私
- **可配置性**：允许用户自定义 AI 服务参数
- **游戏化元素**：通过成就系统提高用户参与度和任务完成动力
